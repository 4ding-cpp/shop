(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{522:function(t,e,r){"use strict";r.r(e);r(6),r(4),r(3),r(2),r(5),r(18);var n=r(0),c=(r(14),r(1)),o=r(15);r(16);function l(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}var d,h,v,f,m,_,y={data:function(){return{forms:null,free_shipping:!1,total:{fee_logistics:0,money:0},active:"store",delivery:{selected:0,list:[]},cash:{show:!0,selected:0,list:[]},render_id:""}},watch:{"$store.state.cart.info":(_=Object(c.a)(regeneratorRuntime.mark((function t(e,r){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.loading(!1);case 1:case"end":return t.stop()}}),t,this)}))),function(t,e){return _.apply(this,arguments)}),"delivery.selected":(m=Object(c.a)(regeneratorRuntime.mark((function t(e,r){var data;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:data=this.delivery.list[this.delivery.selected].data,this.total.fee_logistics=data.logistics_fee,this.cash.show=6!=data.payment_type;case 3:case"end":return t.stop()}}),t,this)}))),function(t,e){return m.apply(this,arguments)})},methods:function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?l(Object(source),!0).forEach((function(e){Object(n.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):l(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({},Object(o.b)({loading:"loading",_store:"_store"}),{switchType:function(t){this.active=t},get_logistics:(f=Object(c.a)(regeneratorRuntime.mark((function t(){var e,i,r,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.$store.dispatch("cash/get_logistics",{condition:null});case 2:if(e=t.sent,console.log("result>>>",e),0!==e.code){t.next=7;break}return alert(e.data),t.abrupt("return",!1);case 7:for(i in e.data)r=e.data[i],n={id:i,title:""!=r.remark?"".concat(r.name.tw,"<br>(").concat(r.remark,")"):"".concat(r.name.tw),data:r},this.delivery.list.push(n),0==i&&(this.total.fee_logistics=r.logistics_fee,this.cash.show=6!=r.payment_type);return t.abrupt("return",!0);case 9:case"end":return t.stop()}}),t,this)}))),function(){return f.apply(this,arguments)}),get_payment:(v=Object(c.a)(regeneratorRuntime.mark((function t(){var e,i,r,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.$store.dispatch("cash/get_payment",{condition:null});case 2:if(e=t.sent,console.log("result>>>",e),0!==e.code){t.next=7;break}return alert(e.data),t.abrupt("return",!1);case 7:for(i in e.data)r=e.data[i],n={id:i,title:""!=r.remark?"".concat(r.name.tw,"<br>(").concat(r.remark,")"):"".concat(r.name.tw),data:r},this.cash.list.push(n);return t.abrupt("return",!0);case 9:case"end":return t.stop()}}),t,this)}))),function(){return v.apply(this,arguments)}),toStep3:(h=Object(c.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:localStorage.setItem("order",JSON.stringify({LogisticsAdapter:{id:this.delivery.list[this.delivery.selected].data.adapter_id,service:this.delivery.list[this.delivery.selected].data.service},PaymentAdapter:{id:!0===this.cash.show?this.cash.list[this.cash.selected].data.adapter_id:"",service:!0===this.cash.show?this.cash.list[this.cash.selected].data.service:""}})),this.$router.push({path:"/cart/step3"});case 2:case"end":return t.stop()}}),t,this)}))),function(){return h.apply(this,arguments)})}),mounted:(d=Object(c.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.loading(!0),console.log("query:",this.$route.query),console.log("物流:",this.delivery),console.log("cash:",this.cash),t.next=6,this.get_logistics();case 6:return t.next=8,this.get_payment();case 8:this.loading(!1);case 9:case"end":return t.stop()}}),t,this)}))),function(){return d.apply(this,arguments)})},w=r(9),component=Object(w.a)(y,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"page"}},[r("section",{staticClass:"content"},[r("Step"),t._v(" "),r("div",{staticClass:"container"},[r("div",{staticClass:"row"},[r("div",{staticClass:"content col-md-9",staticStyle:{"min-height":"500px"}},[r("h5",{staticClass:"control-label"},[t._v("付款運送方式")]),t._v(" "),r("div",[r("div",{staticClass:"w-100 mb-4"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-md-6 pr-2 mb-3 shipping"},[r("button",{staticClass:"shipping-method",class:{"on-active":"store"===t.active},attrs:{type:"button"},on:{click:function(e){t.active="store"}}},[r("div",{staticClass:"shipping-label"},[r("div",[r("span",[r("i",{staticClass:"pr-2",class:{"fas fa-check-circle":"store"===t.active,"far fa-circle ":"store"!==t.active}}),t._v("超商\n                        ")])])])])])]),t._v(" "),r("div",{staticClass:"from-group mb-3"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-md-2 float-left control-label"},[t._v("配送方式")]),t._v(" "),r("div",{staticClass:"col-md-10 float-left"},[r("div",{staticClass:"row"},t._l(t.delivery.list,(function(e,i){return r("div",{staticClass:"col-md-4 pr-2 mb-3"},[r("ButtonChoice",{attrs:{title:e.title,free:t.free_shipping,active:t.delivery.selected==e.id},on:{selected:function(r){t.delivery.selected=e.id}}})],1)})),0)])])]),t._v(" "),r("div",{staticClass:"from-group mb-3"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-md-2 float-left control-label"},[t._v("付款方式")]),t._v(" "),r("div",{staticClass:"col-md-10 float-left"},[!0===t.cash.show?r("div",{staticClass:"row"},t._l(t.cash.list,(function(e,i){return r("div",{staticClass:"col-md-4 pr-2 mb-3"},[r("ButtonChoice",{attrs:{title:e.title,free:t.free_shipping,active:t.cash.selected==e.id},on:{selected:function(r){t.cash.selected=e.id}}})],1)})),0):t._e(),t._v(" "),!1===t.cash.show?r("div",{staticClass:"row"},[r("div",{staticClass:"col-md-4 pr-2 mb-3"},[r("ButtonChoice",{attrs:{title:"取貨付款",free:!1,active:!0}})],1)]):t._e()])])])])])]),t._v(" "),r("div",{staticClass:"col-md-3"},[r("div",{staticClass:"checkout-amount-wrap"},[r("ul",{staticClass:"list-unstyled components checkout-amount"},[t._m(0),t._v(" "),t._m(1),t._v(" "),r("li",[t._v("\n                運費\n                "),r("span",{staticClass:"float-right"},[t._v(t._s(t.total.fee_logistics))])]),t._v(" "),r("li",[t._v("\n                應付總額\n                "),r("span",{staticClass:"price float-right"},[t._v("\n                  NT$\n                  "),r("span",{staticClass:"total"},[t._v(t._s(t.total.money))])])]),t._v(" "),r("li",[r("button",{staticClass:"w-100 btn btn-outline-primary btn-sm",on:{click:function(e){return t.toStep3()}}},[t._v("前往結帳")])])])])])])])],1),t._v(" "),r("div",{attrs:{id:"forms"}})])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("li",[e("a",{attrs:{href:"#homeSubmenu","data-toggle":"collapse","aria-expanded":"false"}},[this._v("結帳金額")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("li",{staticClass:"collapse list-unstyled",attrs:{id:"homeSubmenu"}},[this._v("\n                商品小計\n                "),e("span",{staticClass:"float-right"},[this._v("489")])])}],!1,null,"6fb491d0",null);e.default=component.exports}}]);